* Author Guidelines

* Under the Hood

#+BEGIN_SRC makefile :tangle coq.mk
COQ_POSTS := $(shell find site/ -name "*.v")
COQ_HTML := $(COQ_POSTS:.v=.html)

coq-build : ${COQ_HTML}

theme-build : site/style/coq.sass
soupault-build : coq-build

ARTIFACTS += *.vo *.vok *.vos .*.aux *.glob .lia.cache
ARTIFACTS += ${COQ_HTML}

COQLIB := "https://coq.inria.fr/distrib/current/stdlib/"
COQCARG := -async-proofs-cache force \
           -w -custom-entry-overriden
COQDOCARG := --no-index --charset utf8 --short \
             --body-only --coqlib "${COQLIB}"

%.html : %.v coq.mk
	@echo "  export  $*.v"
	@coqc ${COQCARG} $<
	@coqdoc ${COQDOCARG} -d $(shell dirname $<) $<
	@rm -f $(shell dirname $<)/coqdoc.css
#+END_SRC

#+BEGIN_SRC sass :tangle site/style/coq.sass
div.code
    white-space: nowrap
    overflow-x: auto
    scrollbar-width: thin

pre
    padding: .3em 0 .3em 0
    overflow-x: auto
    scrollbar-width: thin

.code a[href]
    text-decoration: none

    .url-mark
        display: none

.paragraph
    margin-top: 1em
    margin-bottom: 1em
#+END_SRC

# Local Variables:
# org-src-preserve-indentation: t
# End:
