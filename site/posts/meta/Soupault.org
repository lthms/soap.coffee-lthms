#+BEGIN_EXPORT html
<h1><code>soupault</code> Configuration</h1>

<div id="history">site/posts/meta/Soupault.org</div>
#+END_EXPORT

#+BEGIN_SRC toml :tangle ../../../soupault.conf
[settings]
  strict = true
  verbose = false
  debug = false
  site_dir = "site"
  build_dir = "build"

  page_file_extensions = ["html"]
  ignore_extensions = [
    "draft", "vo", "vok", "vos", "glob",
    "html~", "org", "aux", "sass",
  ]

  generator_mode = true
  complete_page_selector = "html"
  default_template = "templates/main.html"
  content_selector = "main"
  doctype = "<!DOCTYPE html>"
  clean_urls = true

[widgets.page-title]
  widget = "title"
  selector = "h1"
  default = "~lthms"
  prepend = "~lthms: "

[widgets.generator-meta]
  widget = "insert_html"
  html = '<meta name="generator" content="soupault 1.5">'
  selector = "head"

[widgets.table-of-contents]
  widget = "toc"
  selector = "div#generate-toc"
  action = "replace_element"
  min_level = 2
  numbered_list = true

[plugins.fix_urls]
  file = "plugins/fix_urls.lua"

[plugins.external_links]
  file = "plugins/external_links.lua"

[widgets.fix-urls]
  widget = "fix_urls"
  prefix_url = "/~lthms"

[widgets.mark-external-urls]
  after = "generate-history"
  widget = "external_links"

[widgets.generate-history]
  widget = "preprocess_element"
  selector = "#history"
  command = "./scripts/generate_history.sh \"templates/history.html\""
  action = "replace_content"

[widgets.math]
  widget = "preprocess_element"
  selector = ".imath"
  command = "node scripts/katex.js"
  action = "replace_content"
#+END_SRC
